document.addEventListener("DOMContentLoaded", () => {
    // Assign relevant images to each section
    const collections = {
        "our-collection": ["wrap1.jpeg","wrap2.jpeg","wrap3.jpeg","wrap4.jpeg","wrap5.jpeg"],
        "mens-collection": ["men1.jpeg","men2.jpeg","men3.jpeg"],
        "musars-section": ["musar1.jpeg","musar2.jpeg","musar3.jpeg"]
    };

    for (const sectionId in collections) {
        const grid = document.querySelector(`#${sectionId} .product-grid`);
        collections[sectionId].forEach(img => {
            const container = document.createElement('div');
            container.className = 'zoom-container';
            container.innerHTML = `
                <a href="#" class="product-link" data-img="images/${img}" data-price="4999" data-title="ZarKash Product">
                    <img src="images/${img}" alt="Product" loading="lazy">
                    <div class="price-tag">₹4999</div>
                </a>
            `;
            grid.appendChild(container);
        });
    }

    // Explore Carousel (all images)
    const exploreTrack = document.querySelector('.carousel-track');
    const exploreImages = ["wrap1.jpeg","wrap2.jpeg","wrap3.jpeg","wrap4.jpeg","wrap5.jpeg","men1.jpeg","men2.jpeg","men3.jpeg","musar1.jpeg","musar2.jpeg"];
    exploreImages.forEach(img => {
        const item = document.createElement('div');
        item.className = 'zoom-container';
        item.innerHTML = `
            <a href="#" class="product-link" data-img="images/${img}" data-price="4999" data-title="ZarKash Product">
                <img src="images/${img}" alt="Shawl" loading="lazy">
                <div class="price-tag">₹4999</div>
            </a>
        `;
        exploreTrack.appendChild(item);
    });
    exploreTrack.innerHTML += exploreTrack.innerHTML; // duplicate for infinite scroll

    // MODAL LOGIC
    const modal = document.getElementById('product-modal');
    const modalImg = document.getElementById('modal-img');
    const modalTitle = document.getElementById('modal-title');
    const modalPrice = document.getElementById('modal-price');
    const modalChat = document.getElementById('modal-chat');
    const closeModal = document.getElementById('close-modal');

    document.querySelectorAll('.product-link').forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            modalImg.src = link.dataset.img;
            modalPrice.textContent = `₹${link.dataset.price}`;
            modalTitle.textContent = link.dataset.title;
            modalChat.href = `https://wa.me/91XXXXXXXXXX?text=Hello, I am interested in ${link.dataset.title}`;
            modal.style.display = 'flex';
        });
    });

    closeModal.addEventListener('click', () => { modal.style.display = 'none'; });
    modal.addEventListener('click', e => { if(e.target === modal) modal.style.display = 'none'; });
});
